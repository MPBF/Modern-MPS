
> rest-express@1.0.0 dev
> NODE_ENV=development tsx server/index.ts

[2025-12-03T03:21:05.137Z] [INFO] âœ… Meta WhatsApp API service initialized successfully
âœ… Twilio WhatsApp service initialized successfully
ğŸ“± Using Twilio as WhatsApp gateway
âœ… Using PostgreSQL session store for development - sessions will persist across server restarts
âœ… Password security check passed: All 51 user passwords are properly hashed
âœ… Memory monitoring started (interval: 30000ms)
[DataValidator] Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…ÙÙØ¹Ù„
[DataValidator] ØªÙ… ØªØ­Ù…ÙŠÙ„ 9 Ù‚Ø§Ø¹Ø¯Ø© ØªØ­Ù‚Ù‚ Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
[DataValidator] ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø¯Ù‚Ù‚Ø§Øª Ø§Ù„Ù…Ø®ØµØµØ©
[DataValidator] ØªÙ… ØªØ´ØºÙŠÙ„ Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­ âœ…
3:21:05 AM [express] serving on port 5000
âš ï¸ [WARNING] GET / took 1086ms
âš ï¸ [WARNING] GET /client/src/index-high-contrast.css took 701ms
âš ï¸ Unauthenticated API request: /api/me
[2025-12-03T03:21:19.938Z] [DEBUG] No authenticated session found
[2025-12-03T03:21:19.939Z] [DEBUG] No authenticated session on /api/me
3:21:19 AM [express] GET /api/me 401 in 4ms :: {"message":"Unauthorized","success":false}
âš ï¸ Unauthenticated API request: /api/me
[2025-12-03T03:21:20.163Z] [DEBUG] No authenticated session found
[2025-12-03T03:21:20.163Z] [DEBUG] No authenticated session on /api/me
3:21:20 AM [express] GET /api/me 401 in 1ms :: {"message":"Unauthorized","success":false}
ğŸ” Validating request body: {
  "username": "AbuKhalid",
  "password": "Ibr@haj1"
}
âœ… Validation successful
[2025-12-03T03:21:44.420Z] [DEBUG] Session created and saved {
  "userId": 1
}
âš ï¸ [WARNING] POST /api/login took 705ms
3:21:44 AM [express] POST /api/login 200 in 706ms :: {"user":"[Object]"}
ğŸ”„ Session extended for user 1 on /api/notifications
ğŸ”„ Session extended for user 1 on /api/notifications
ğŸ”„ Session extended for user 1 on /api/dashboard/stats
ğŸ”„ Session extended for user 1 on /api/quick-notes
ğŸ”„ Session extended for user 1 on /api/users
3:21:45 AM [express] GET /api/notifications 200 in 179ms :: {"data":"[Array:0]"}
ğŸ”„ Session extended for user 1 on /api/quick-notes
ğŸ”„ Session extended for user 1 on /api/dashboard/stats
ğŸ”„ Session extended for user 1 on /api/users
3:21:45 AM [express] GET /api/dashboard/stats 200 in 62ms :: {"activeOrders":0,"productionRate":20,"â€¦
3:21:45 AM [express] GET /api/quick-notes 200 in 123ms :: {"data":"[Array:0]"}
3:21:45 AM [express] GET /api/users 200 in 174ms :: {"data":"[Array:51]"}
ğŸ”„ Session extended for user 1 on /api/rolls
ğŸ”„ Session extended for user 1 on /api/production-orders/active-for-operator
3:22:08 AM [express] GET /api/production-orders/active-for-operator 200 in 279ms :: {"data":"[Array:â€¦
3:22:08 AM [express] GET /api/rolls 500 in 313ms :: {"message":"Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø±ÙˆÙ„Ø§Øª"}
ğŸ”„ Session extended for user 1 on /api/rolls
3:22:11 AM [express] GET /api/rolls 500 in 122ms :: {"message":"Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø±ÙˆÙ„Ø§Øª"}
ğŸ”„ Session extended for user 1 on /api/orders
ğŸ”„ Session extended for user 1 on /api/production-orders
ğŸ”„ Session extended for user 1 on /api/customers
3:22:12 AM [express] GET /api/orders 200 in 136ms :: {"data":"[Array:2]","count":2,"success":true}
3:22:12 AM [express] GET /api/production-orders 200 in 174ms :: {"data":"[Array:2]"}
3:22:12 AM [express] GET /api/customers 200 in 466ms :: {"data":"[Array:3173]"}
ğŸ”„ Session extended for user 1 on /api/items
ğŸ”„ Session extended for user 1 on /api/customer-products
3:22:12 AM [express] GET /api/items 200 in 186ms :: {"data":"[Array:72]"}
ğŸ”„ Session extended for user 1 on /api/categories
3:22:13 AM [express] GET /api/categories 200 in 122ms :: {"data":"[Array:10]"}
âš ï¸ [WARNING] GET /api/customer-products took 676ms
3:22:13 AM [express] GET /api/customer-products 200 in 748ms :: {"data":"[Array:4817]"}
ğŸ”„ Session extended for user 1 on /api/rolls/search
Error searching rolls: error: column rolls.roll_dimensions does not exist
    at file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1345:74
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async NeonPreparedQuery.execute (/home/runner/workspace/node_modules/src/neon-serverless/session.ts:102:18)
    at async DatabaseStorage.searchRolls (/home/runner/workspace/server/storage.ts:3198:21)
    at async <anonymous> (/home/runner/workspace/server/routes.ts:6360:23) {
  length: 120,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '768',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3722',
  routine: 'errorMissingColumn'
}
3:22:14 AM [express] GET /api/rolls/search 500 in 152ms :: {"message":"Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø±ÙˆÙ„Ø§Øª"}
ğŸ”„ Session extended for user 1 on /api/rolls
3:22:27 AM [express] GET /api/rolls 500 in 304ms :: {"message":"Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø±ÙˆÙ„Ø§Øª"}
ğŸ”„ Session extended for user 1 on /api/rolls
ğŸ”„ Session extended for user 1 on /api/rolls
3:22:32 AM [express] GET /api/rolls 500 in 307ms :: {"message":"Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø±ÙˆÙ„Ø§Øª"}
ğŸ”„ Session extended for user 1 on /api/rolls
3:22:34 AM [express] GET /api/rolls 500 in 122ms :: {"message":"Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø±ÙˆÙ„Ø§Øª"}
ğŸ”„ Session extended for user 1 on /api/rolls
3:22:41 AM [express] GET /api/rolls 500 in 302ms :: {"message":"Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø±ÙˆÙ„Ø§Øª"}
ğŸ”„ Session extended for user 1 on /api/rolls/active-for-printing
ğŸ”„ Session extended for user 1 on /api/rolls/active-for-printing
3:22:43 AM [express] GET /api/rolls/active-for-printing 200 in 187ms :: {"data":"[Array:0]"}
ğŸ”„ Session extended for user 1 on /api/rolls/active-for-cutting
3:22:45 AM [express] GET /api/rolls/active-for-cutting 200 in 182ms :: {"data":"[Array:2]"}
ğŸ”„ Session extended for user 1 on /api/rolls
3:22:52 AM [express] GET /api/rolls 500 in 302ms :: {"message":"Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø±ÙˆÙ„Ø§Øª"}
ğŸ”„ Session extended for user 1 on /api/rolls/search
Error searching rolls: error: column rolls.roll_dimensions does not exist
    at file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1345:74
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async NeonPreparedQuery.execute (/home/runner/workspace/node_modules/src/neon-serverless/session.ts:102:18)
    at async DatabaseStorage.searchRolls (/home/runner/workspace/server/storage.ts:3198:21)
    at async <anonymous> (/home/runner/workspace/server/routes.ts:6360:23) {
  length: 120,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '768',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3722',
  routine: 'errorMissingColumn'
}
3:22:54 AM [express] GET /api/rolls/search 500 in 305ms :: {"message":"Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø±ÙˆÙ„Ø§Øª"}
ğŸ”„ Session extended for user 1 on /api/production-orders/management
ğŸ”„ Session extended for user 1 on /api/machines
3:23:02 AM [express] GET /api/production-orders/management 200 in 184ms :: {"success":true,"data":"[â€¦
3:23:02 AM [express] GET /api/machines 200 in 181ms :: {"data":"[Array:25]"}
ğŸ”„ Session extended for user 1 on /api/rolls/search
Error searching rolls: error: column rolls.roll_dimensions does not exist
    at file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1345:74
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async NeonPreparedQuery.execute (/home/runner/workspace/node_modules/src/neon-serverless/session.ts:102:18)
    at async DatabaseStorage.searchRolls (/home/runner/workspace/server/storage.ts:3198:21)
    at async <anonymous> (/home/runner/workspace/server/routes.ts:6360:23) {
  length: 120,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '768',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3722',
  routine: 'errorMissingColumn'
}
3:23:10 AM [express] GET /api/rolls/search 500 in 297ms :: {"message":"Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø±ÙˆÙ„Ø§Øª"}
ğŸ”„ Session extended for user 1 on /api/production/orders-tracking/film
ğŸ”„ Session extended for user 1 on /api/production/rolls-tracking/film
ğŸ”„ Session extended for user 1 on /api/production/stats-by-section/cutting
ğŸ”„ Session extended for user 1 on /api/production/stats-by-section/printing
ğŸ”„ Session extended for user 1 on /api/production/stats-by-section/film
3:23:15 AM [express] GET /api/production/stats-by-section/cutting 200 in 127ms :: {"total_weight":"0â€¦
3:23:15 AM [express] GET /api/production/stats-by-section/printing 200 in 118ms :: {"total_weight":"â€¦
3:23:15 AM [express] GET /api/production/stats-by-section/film 200 in 117ms :: {"total_weight":"1680â€¦
ğŸ”„ Session extended for user 1 on /api/production/users-performance/film
ğŸ”„ Session extended for user 1 on /api/production/machines-production/film
ğŸ”„ Session extended for user 1 on /api/production/rolls-tracking/film
ğŸ”„ Session extended for user 1 on /api/production/orders-tracking/film
3:23:16 AM [express] GET /api/production/users-performance/film 200 in 135ms :: {"data":"[Array:0]"}
3:23:16 AM [express] GET /api/production/machines-production/film 200 in 131ms :: {"data":"[Array:10â€¦
3:23:16 AM [express] GET /api/production/rolls-tracking/film 200 in 146ms :: {"data":"[Array:7]"}
3:23:16 AM [express] GET /api/production/orders-tracking/film 200 in 118ms :: {"data":"[Array:0]"}
ğŸ”„ Session extended for user 1 on /api/rolls/search
Error searching rolls: error: column rolls.roll_dimensions does not exist
    at file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1345:74
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async NeonPreparedQuery.execute (/home/runner/workspace/node_modules/src/neon-serverless/session.ts:102:18)
    at async DatabaseStorage.searchRolls (/home/runner/workspace/server/storage.ts:3198:21)
    at async <anonymous> (/home/runner/workspace/server/routes.ts:6360:23) {
  length: 120,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '768',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3722',
  routine: 'errorMissingColumn'
}
3:23:29 AM [express] GET /api/rolls/search 500 in 299ms :: {"message":"Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø±ÙˆÙ„Ø§Øª"}
ğŸ”„ Session extended for user 1 on /api/orders/99/status
[DataValidator] ğŸ”„ Validating status transition for orders: {
  entityId: 99,
  currentStatus: 'for_production',
  newStatus: 'for_production'
}
[Storage] âŒ INVALID ORDER STATUS TRANSITION: [
  {
    field: 'status',
    message: 'Invalid status transition: for_production â†’ for_production',
    message_ar: 'Ø§Ù†ØªÙ‚Ø§Ù„ Ø­Ø§Ù„Ø© ØºÙŠØ± ØµØ­ÙŠØ­: for_production â† for_production',
    severity: 'high',
    rule_id: 'invalid_status_transition',
    value: { from: 'for_production', to: 'for_production', allowed: [Array] }
  }
]
Database error during ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨: DatabaseError: Ø§Ù†ØªÙ‚Ø§Ù„ Ø­Ø§Ù„Ø© ØºÙŠØ± ØµØ­ÙŠØ­: Ø§Ù†ØªÙ‚Ø§Ù„ Ø­Ø§Ù„Ø© ØºÙŠØ± ØµØ­ÙŠØ­: for_production â† for_production
    at <anonymous> (/home/runner/workspace/server/storage.ts:1526:17)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async withDatabaseErrorHandling (/home/runner/workspace/server/storage.ts:404:12)
    at async <anonymous> (/home/runner/workspace/server/routes.ts:4966:23) {
  code: 'INVALID_STATUS_TRANSITION',
  constraint: undefined,
  table: undefined
}
Error updating order status: DatabaseError: Ø®Ø·Ø£ ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨ - Ù…Ø¹Ø±Ù Ø§Ù„Ø·Ù„Ø¨: 99, Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©: for_production
    at handleDatabaseError (/home/runner/workspace/server/storage.ts:392:9)
    at withDatabaseErrorHandling (/home/runner/workspace/server/storage.ts:406:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async <anonymous> (/home/runner/workspace/server/routes.ts:4966:23) {
  code: 'INVALID_STATUS_TRANSITION',
  constraint: undefined,
  table: undefined
}
3:23:40 AM [express] PATCH /api/orders/99/status 400 in 181ms :: {"message":"Ø®Ø·Ø£ ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø£â€¦
ğŸ”„ Session extended for user 1 on /api/orders/99
âš ï¸ [WARNING] DELETE /api/orders/99 took 853ms
3:23:46 AM [express] DELETE /api/orders/99 200 in 912ms :: {"message":"ØªÙ… Ø­Ø°Ù Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­","success"â€¦
ğŸ”„ Session extended for user 1 on /api/orders
ğŸ”„ Session extended for user 1 on /api/production-orders
3:23:46 AM [express] GET /api/production-orders 200 in 118ms :: {"data":"[Array:1]"}
3:23:46 AM [express] GET /api/orders 200 in 122ms :: {"data":"[Array:1]","count":1,"success":true}
ğŸ”„ Session extended for user 1 on /api/orders/98
âš ï¸ [WARNING] DELETE /api/orders/98 took 1408ms
3:23:52 AM [express] DELETE /api/orders/98 200 in 1468ms :: {"message":"ØªÙ… Ø­Ø°Ù Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­","successâ€¦
ğŸ”„ Session extended for user 1 on /api/production-orders
ğŸ”„ Session extended for user 1 on /api/orders
3:23:53 AM [express] GET /api/production-orders 200 in 120ms :: {"data":"[Array:0]"}
3:23:53 AM [express] GET /api/orders 200 in 118ms :: {"data":"[Array:0]","count":0,"success":true}
ğŸ”„ Session extended for user 1 on /api/production-orders/preview-quantities
ğŸ”„ Session extended for user 1 on /api/production-orders/preview-quantities
3:24:07 AM [express] POST /api/production-orders/preview-quantities 200 in 520ms :: {"success":true,â€¦
3:24:07 AM [express] POST /api/production-orders/preview-quantities 200 in 523ms :: {"success":true,â€¦
ğŸ”„ Session extended for user 1 on /api/production-orders/preview-quantities
3:24:08 AM [express] POST /api/production-orders/preview-quantities 200 in 285ms :: {"success":true,â€¦
ğŸ”„ Session extended for user 1 on /api/orders/next-number
3:24:10 AM [express] GET /api/orders/next-number 200 in 120ms :: {"orderNumber":"ORD001"}
ğŸ”„ Session extended for user 1 on /api/orders
ğŸ” Validating request body: {
  "order_number": "ORD001",
  "customer_id": "CID004",
  "delivery_days": 15,
  "notes": "",
  "created_by": 1
}
âœ… Validation successful
[DataValidator] ğŸ”’ Validating orders entity: {
  tableName: 'orders',
  isUpdate: false,
  dataKeys: [
    'order_number',
    'customer_id',
    'delivery_days',
    'status',
    'notes',
    'created_by',
    'delivery_date'
  ]
}
[DataValidator] âœ… Validation passed for orders
[Storage] âœ… Order validation passed, proceeding with database write
3:24:11 AM [express] POST /api/orders 201 in 136ms :: {"data":"[Object]","message":"ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø·Ù„Ø¨ Ø¨â€¦
ğŸ”„ Session extended for user 1 on /api/production-orders/batch
[DataValidator] ğŸ”’ Validating production_orders entity: {
  tableName: 'production_orders',
  isUpdate: false,
  dataKeys: [
    'order_id',
    'customer_product_id',
    'quantity_kg',
    'overrun_percentage',
    'status'
  ]
}
[DataValidator] âœ… Validation passed for production_orders
[Batch] Created production order PO001
[Batch] Created 1 production orders, 0 failed
âš ï¸ [WARNING] POST /api/production-orders/batch took 881ms
3:24:12 AM [express] POST /api/production-orders/batch 201 in 944ms :: {"message":"ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ 1 Ù…Ù† 1 Ø·â€¦
ğŸ”„ Session extended for user 1 on /api/orders
ğŸ”„ Session extended for user 1 on /api/production-orders
3:24:13 AM [express] GET /api/orders 200 in 118ms :: {"data":"[Array:1]","count":1,"success":true}
3:24:13 AM [express] GET /api/production-orders 200 in 121ms :: {"data":"[Array:1]"}
ğŸ”„ Session extended for user 1 on /api/orders/100/status
[DataValidator] ğŸ”„ Validating status transition for orders: {
  entityId: 100,
  currentStatus: 'waiting',
  newStatus: 'for_production'
}
[DataValidator] âœ… Valid status transition: waiting â†’ for_production
[Storage] âœ… Valid status transition: waiting â†’ for_production
3:24:19 AM [express] PATCH /api/orders/100/status 200 in 477ms :: {"data":"[Object]","message":"ØªÙ… Øªâ€¦
ğŸ”„ Session extended for user 1 on /api/production-orders
ğŸ”„ Session extended for user 1 on /api/orders
3:24:20 AM [express] GET /api/production-orders 200 in 123ms :: {"data":"[Array:1]"}
3:24:20 AM [express] GET /api/orders 200 in 132ms :: {"data":"[Array:1]","count":1,"success":true}
ğŸ”„ Session extended for user 1 on /api/notifications
ğŸ”„ Session extended for user 1 on /api/notifications
3:24:26 AM [express] GET /api/notifications 200 in 126ms :: {"data":"[Array:0]"}
ğŸ”„ Session extended for user 1 on /api/notifications
ğŸ”„ Session extended for user 1 on /api/rolls
ğŸ”„ Session extended for user 1 on /api/production-orders/active-for-operator
3:24:26 AM [express] GET /api/notifications 200 in 127ms :: {"data":"[Array:0]"}
3:24:26 AM [express] GET /api/production-orders/active-for-operator 200 in 260ms :: {"data":"[Array:â€¦
ğŸ”„ Session extended for user 1 on /api/rolls
3:24:27 AM [express] GET /api/rolls 500 in 121ms :: {"message":"Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø±ÙˆÙ„Ø§Øª"}
ğŸ”„ Session extended for user 1 on /api/rolls
3:24:29 AM [express] GET /api/rolls 500 in 121ms :: {"message":"Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø±ÙˆÙ„Ø§Øª"}
ğŸ”„ Session extended for user 1 on /api/rolls/create-with-timing
Database error during createRollWithTiming: error: column "roll_dimensions" does not exist
    at file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1345:74
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async NeonPreparedQuery.execute (/home/runner/workspace/node_modules/src/neon-serverless/session.ts:102:18)
    at async <anonymous> (/home/runner/workspace/server/storage.ts:11940:31)
    at async withDatabaseErrorHandling (/home/runner/workspace/server/storage.ts:404:12)
    at async <anonymous> (/home/runner/workspace/server/routes.ts:1861:23) {
  length: 116,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '397',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3722',
  routine: 'errorMissingColumn'
}
Error creating roll with timing: DatabaseError: Ø®Ø·Ø£ ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø£Ø«Ù†Ø§Ø¡ createRollWithTiming - Ø¥Ù†Ø´Ø§Ø¡ Ø±ÙˆÙ„ Ù…Ø¹ Ø­Ø³Ø§Ø¨ Ø§Ù„ÙˆÙ‚Øª
    at handleDatabaseError (/home/runner/workspace/server/storage.ts:392:9)
    at withDatabaseErrorHandling (/home/runner/workspace/server/storage.ts:406:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async <anonymous> (/home/runner/workspace/server/routes.ts:1861:23) {
  code: '42703',
  constraint: undefined,
  table: undefined
}
3:24:34 AM [express] POST /api/rolls/create-with-timing 500 in 184ms :: {"success":false,"message":"â€¦
ğŸ”„ Session extended for user 1 on /api/rolls/create-with-timing
Database error during createRollWithTiming: error: column "roll_dimensions" does not exist
    at file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1345:74
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async NeonPreparedQuery.execute (/home/runner/workspace/node_modules/src/neon-serverless/session.ts:102:18)
    at async <anonymous> (/home/runner/workspace/server/storage.ts:11940:31)
    at async withDatabaseErrorHandling (/home/runner/workspace/server/storage.ts:404:12)
    at async <anonymous> (/home/runner/workspace/server/routes.ts:1861:23) {
  length: 116,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '397',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3722',
  routine: 'errorMissingColumn'
}
Error creating roll with timing: DatabaseError: Ø®Ø·Ø£ ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø£Ø«Ù†Ø§Ø¡ createRollWithTiming - Ø¥Ù†Ø´Ø§Ø¡ Ø±ÙˆÙ„ Ù…Ø¹ Ø­Ø³Ø§Ø¨ Ø§Ù„ÙˆÙ‚Øª
    at handleDatabaseError (/home/runner/workspace/server/storage.ts:392:9)
    at withDatabaseErrorHandling (/home/runner/workspace/server/storage.ts:406:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async <anonymous> (/home/runner/workspace/server/routes.ts:1861:23) {
  code: '42703',
  constraint: undefined,
  table: undefined
}
3:24:44 AM [express] POST /api/rolls/create-with-timing 500 in 367ms :: {"success":false,"message":"â€¦
ğŸ”„ Session extended for user 1 on /api/users
ğŸ”„ Session extended for user 1 on /api/customer-products
ğŸ”„ Session extended for user 1 on /api/customers
3:24:52 AM [express] GET /api/users 304 in 241ms :: {"data":"[Array:51]"}
3:24:52 AM [express] GET /api/customers 304 in 498ms :: {"data":"[Array:3173]"}
ğŸ”„ Session extended for user 1 on /api/categories
ğŸ”„ Session extended for user 1 on /api/items
3:24:52 AM [express] GET /api/customer-products 304 in 562ms :: {"data":"[Array:4817]"}
3:24:52 AM [express] GET /api/categories 304 in 120ms :: {"data":"[Array:10]"}
3:24:52 AM [express] GET /api/items 304 in 178ms :: {"data":"[Array:72]"}
ğŸ”„ Session extended for user 1 on /api/rolls/search
Error searching rolls: error: column rolls.roll_dimensions does not exist
    at file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1345:74
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async NeonPreparedQuery.execute (/home/runner/workspace/node_modules/src/neon-serverless/session.ts:102:18)
    at async DatabaseStorage.searchRolls (/home/runner/workspace/server/storage.ts:3198:21)
    at async <anonymous> (/home/runner/workspace/server/routes.ts:6360:23) {
  length: 120,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '768',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3722',
  routine: 'errorMissingColumn'
}
3:24:54 AM [express] GET /api/rolls/search 500 in 124ms :: {"message":"Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø±ÙˆÙ„Ø§Øª"}
[2025-12-03T03:25:10.710Z] [DEBUG] User resolved from session.userId 1
3:25:10 AM [express] GET /api/me 200 in 178ms :: {"user":"[Object]","success":true}
ğŸ”„ Session extended for user 1 on /api/notifications
ğŸ”„ Session extended for user 1 on /api/orders
ğŸ”„ Session extended for user 1 on /api/customers
ğŸ”„ Session extended for user 1 on /api/customer-products
ğŸ”„ Session extended for user 1 on /api/production-orders
[2025-12-03T03:25:11.412Z] [DEBUG] User resolved from session.userId 1
3:25:11 AM [express] GET /api/orders 304 in 284ms :: {"data":"[Array:1]","count":1,"success":true}
3:25:11 AM [express] GET /api/production-orders 304 in 254ms :: {"data":"[Array:1]"}
3:25:11 AM [express] GET /api/me 304 in 337ms :: {"user":"[Object]","success":true}
âš ï¸ [WARNING] GET /api/customer-products took 515ms
3:25:11 AM [express] GET /api/customers 304 in 527ms :: {"data":"[Array:3173]"}
3:25:11 AM [express] GET /api/customer-products 304 in 576ms :: {"data":"[Array:4817]"}
ğŸ”„ Session extended for user 1 on /api/users
ğŸ”„ Session extended for user 1 on /api/categories
ğŸ”„ Session extended for user 1 on /api/items
ğŸ”„ Session extended for user 1 on /api/notifications
3:25:12 AM [express] GET /api/categories 304 in 123ms :: {"data":"[Array:10]"}
3:25:12 AM [express] GET /api/users 304 in 232ms :: {"data":"[Array:51]"}
3:25:12 AM [express] GET /api/items 304 in 179ms :: {"data":"[Array:72]"}
3:25:12 AM [express] GET /api/notifications 200 in 178ms :: {"data":"[Array:0]"}
ğŸ”„ Session extended for user 1 on /api/rolls/search
Error searching rolls: error: column rolls.roll_dimensions does not exist
    at file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1345:74
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async NeonPreparedQuery.execute (/home/runner/workspace/node_modules/src/neon-serverless/session.ts:102:18)
    at async DatabaseStorage.searchRolls (/home/runner/workspace/server/storage.ts:3198:21)
    at async <anonymous> (/home/runner/workspace/server/routes.ts:6360:23) {
  length: 120,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '768',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3722',
  routine: 'errorMissingColumn'
}
3:25:12 AM [express] GET /api/rolls/search 500 in 124ms :: {"message":"Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø±ÙˆÙ„Ø§Øª"}
ğŸ”„ Session extended for user 1 on /api/production-orders/active-for-operator
ğŸ”„ Session extended for user 1 on /api/rolls
3:25:16 AM [express] GET /api/rolls 500 in 124ms :: {"message":"Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø±ÙˆÙ„Ø§Øª"}
3:25:16 AM [express] GET /api/production-orders/active-for-operator 200 in 251ms :: {"data":"[Array:â€¦
ğŸ”„ Session extended for user 1 on /api/rolls
ğŸ”„ Session extended for user 1 on /api/machines
3:25:19 AM [express] GET /api/machines 200 in 176ms :: {"data":"[Array:25]"}
3:25:19 AM [express] GET /api/rolls 500 in 313ms :: {"message":"Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø±ÙˆÙ„Ø§Øª"}
ğŸ”„ Session extended for user 1 on /api/rolls/create-with-timing
Database error during createRollWithTiming: error: column "roll_dimensions" does not exist
    at file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1345:74
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async NeonPreparedQuery.execute (/home/runner/workspace/node_modules/src/neon-serverless/session.ts:102:18)
    at async <anonymous> (/home/runner/workspace/server/storage.ts:11940:31)
    at async withDatabaseErrorHandling (/home/runner/workspace/server/storage.ts:404:12)
    at async <anonymous> (/home/runner/workspace/server/routes.ts:1861:23) {
  length: 116,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '397',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3722',
  routine: 'errorMissingColumn'
}
Error creating roll with timing: DatabaseError: Ø®Ø·Ø£ ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø£Ø«Ù†Ø§Ø¡ createRollWithTiming - Ø¥Ù†Ø´Ø§Ø¡ Ø±ÙˆÙ„ Ù…Ø¹ Ø­Ø³Ø§Ø¨ Ø§Ù„ÙˆÙ‚Øª
    at handleDatabaseError (/home/runner/workspace/server/storage.ts:392:9)
    at withDatabaseErrorHandling (/home/runner/workspace/server/storage.ts:406:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async <anonymous> (/home/runner/workspace/server/routes.ts:1861:23) {
  code: '42703',
  constraint: undefined,
  table: undefined
}
3:25:23 AM [express] POST /api/rolls/create-with-timing 500 in 182ms :: {"success":false,"message":"â€¦
ğŸ”„ Session extended for user 1 on /api/rolls/create-with-timing
Database error during createRollWithTiming: error: column "roll_dimensions" does not exist
    at file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1345:74
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async NeonPreparedQuery.execute (/home/runner/workspace/node_modules/src/neon-serverless/session.ts:102:18)
    at async <anonymous> (/home/runner/workspace/server/storage.ts:11940:31)
    at async withDatabaseErrorHandling (/home/runner/workspace/server/storage.ts:404:12)
    at async <anonymous> (/home/runner/workspace/server/routes.ts:1861:23) {
  length: 116,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '397',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3722',
  routine: 'errorMissingColumn'
}
Error creating roll with timing: DatabaseError: Ø®Ø·Ø£ ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø£Ø«Ù†Ø§Ø¡ createRollWithTiming - Ø¥Ù†Ø´Ø§Ø¡ Ø±ÙˆÙ„ Ù…Ø¹ Ø­Ø³Ø§Ø¨ Ø§Ù„ÙˆÙ‚Øª
    at handleDatabaseError (/home/runner/workspace/server/storage.ts:392:9)
    at withDatabaseErrorHandling (/home/runner/workspace/server/storage.ts:406:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async <anonymous> (/home/runner/workspace/server/routes.ts:1861:23) {
  code: '42703',
  constraint: undefined,
  table: undefined
}
3:25:32 AM [express] POST /api/rolls/create-with-timing 500 in 354ms :: {"success":false,"message":"â€¦
ğŸ”„ Session extended for user 1 on /api/production-orders/active-for-operator
3:25:47 AM [express] GET /api/production-orders/active-for-operator 304 in 234ms :: {"data":"[Array:â€¦
ğŸ”„ Session extended for user 1 on /api/rolls
3:25:49 AM [express] GET /api/rolls 500 in 125ms :: {"message":"Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø±ÙˆÙ„Ø§Øª"}
ğŸ”„ Session extended for user 1 on /api/rolls
3:25:52 AM [express] GET /api/rolls 500 in 307ms :: {"message":"Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø±ÙˆÙ„Ø§Øª"}
ğŸ”„ Session extended for user 1 on /api/production-orders/active-for-operator
3:26:18 AM [express] GET /api/production-orders/active-for-operator 304 in 237ms :: {"data":"[Array:â€¦
ğŸ”„ Session extended for user 1 on /api/rolls
3:26:22 AM [express] GET /api/rolls 500 in 119ms :: {"message":"Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø±ÙˆÙ„Ø§Øª"}
ğŸ”„ Session extended for user 1 on /api/rolls
3:26:25 AM [express] GET /api/rolls 500 in 299ms :: {"message":"Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø±ÙˆÙ„Ø§Øª"}
ğŸ”„ Session extended for user 1 on /api/production-orders/active-for-operator
3:26:49 AM [express] GET /api/production-orders/active-for-operator 304 in 248ms :: {"data":"[Array:â€¦
ğŸ”„ Session extended for user 1 on /api/rolls
3:26:56 AM [express] GET /api/rolls 500 in 304ms :: {"message":"Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø±ÙˆÙ„Ø§Øª"}
ğŸ”„ Session extended for user 1 on /api/rolls
3:26:59 AM [express] GET /api/rolls 500 in 306ms :: {"message":"Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø±ÙˆÙ„Ø§Øª"}
ğŸ”„ Session extended for user 1 on /api/production-orders/active-for-operator
3:27:20 AM [express] GET /api/production-orders/active-for-operator 304 in 242ms :: {"data":"[Array:â€¦
ğŸ”„ Session extended for user 1 on /api/rolls
3:27:30 AM [express] GET /api/rolls 500 in 306ms :: {"message":"Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø±ÙˆÙ„Ø§Øª"}
ğŸ”„ Session extended for user 1 on /api/rolls
3:27:33 AM [express] GET /api/rolls 500 in 121ms :: {"message":"Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø±ÙˆÙ„Ø§Øª"}
ğŸ”„ Session extended for user 1 on /api/production-orders/active-for-operator
3:27:51 AM [express] GET /api/production-orders/active-for-operator 304 in 243ms :: {"data":"[Array:â€¦
ğŸ”„ Session extended for user 1 on /api/rolls
3:28:04 AM [express] GET /api/rolls 500 in 295ms :: {"message":"Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø±ÙˆÙ„Ø§Øª"}
ğŸ”„ Session extended for user 1 on /api/rolls
3:28:06 AM [express] GET /api/rolls 500 in 298ms :: {"message":"Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø±ÙˆÙ„Ø§Øª"}
ğŸ”„ Session extended for user 1 on /api/production-orders/active-for-operator
ğŸ”„ Session extended for user 1 on /api/rolls/create-with-timing
Database error during createRollWithTiming: error: column "roll_dimensions" does not exist
    at file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1345:74
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async NeonPreparedQuery.execute (/home/runner/workspace/node_modules/src/neon-serverless/session.ts:102:18)
    at async <anonymous> (/home/runner/workspace/server/storage.ts:11940:31)
    at async withDatabaseErrorHandling (/home/runner/workspace/server/storage.ts:404:12)
    at async <anonymous> (/home/runner/workspace/server/routes.ts:1861:23) {
  length: 116,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '397',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3722',
  routine: 'errorMissingColumn'
}
Error creating roll with timing: DatabaseError: Ø®Ø·Ø£ ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø£Ø«Ù†Ø§Ø¡ createRollWithTiming - Ø¥Ù†Ø´Ø§Ø¡ Ø±ÙˆÙ„ Ù…Ø¹ Ø­Ø³Ø§Ø¨ Ø§Ù„ÙˆÙ‚Øª
    at handleDatabaseError (/home/runner/workspace/server/storage.ts:392:9)
    at withDatabaseErrorHandling (/home/runner/workspace/server/storage.ts:406:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async <anonymous> (/home/runner/workspace/server/routes.ts:1861:23) {
  code: '42703',
  constraint: undefined,
  table: undefined
}
3:28:21 AM [express] GET /api/production-orders/active-for-operator 304 in 242ms :: {"data":"[Array:â€¦
3:28:22 AM [express] POST /api/rolls/create-with-timing 500 in 362ms :: {"success":false,"message":"â€¦
ğŸ”„ Session extended for user 1 on /api/rolls
3:28:37 AM [express] GET /api/rolls 500 in 296ms :: {"message":"Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø±ÙˆÙ„Ø§Øª"}
ğŸ”„ Session extended for user 1 on /api/rolls
3:28:40 AM [express] GET /api/rolls 500 in 303ms :: {"message":"Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø±ÙˆÙ„Ø§Øª"}
ğŸ”„ Session extended for user 1 on /api/production-orders/active-for-operator